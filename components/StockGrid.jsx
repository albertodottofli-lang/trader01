'use client'; import {useEffect,useState} from 'react'; import StockCard from './StockCard'; export default function StockGrid({tickers}){ const [data,setData]=useState([]); async function load(){ try{ const res=await Promise.all(tickers.map(t=>fetch(`/api/fmp/quote?symbol=${t}`).then(r=>r.json()).catch(()=>null))); setData(res); }catch(e){console.error(e);} } useEffect(()=>{ load(); const i=setInterval(load, Number(process.env.NEXT_PUBLIC_UPDATE_INTERVAL||1000)); return ()=>clearInterval(i); },[]); return (<>{data.map(d=> d ? <StockCard key={d.symbol} data={d} /> : null)}</>); }